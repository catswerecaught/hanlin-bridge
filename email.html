<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>邮件 - 翰林桥</title>
    <link rel="stylesheet" href="style.css?v=3">
    <style>
        .email-container {
            display: flex;
            height: calc(100vh - 4px);
            background: #f5f5f5;
            margin-top: 4px;
            min-height: 0; /* 允许子项滚动 */
            overflow: hidden; /* 防止子项溢出 */
        }
        
        /* 左侧边栏 */
        .email-sidebar {
            width: 200px;
            background: #fff;
            border-right: 1px solid #e1e8ed;
            padding: 16px 0;
            overflow-y: auto;
        }
        
        .compose-btn {
            margin: 0 16px 20px 16px;
            background: #0078d4;
            color: #fff;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            width: calc(100% - 32px);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 15px;
        }
        
        .compose-btn:hover {
            background: #106ebe;
        }
        
        .folder-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .folder-item {
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 14px;
        }
        
        .folder-item:hover {
            background: #f3f2f1;
        }
        
        .folder-item.active {
            background: #e3f2fd;
            border-right: 2px solid #0078d4;
            color: #0078d4;
            font-weight: 600;
        }
        
        .folder-count {
            background: #0078d4;
            color: #fff;
            border-radius: 10px;
            padding: 2px 6px;
            font-size: 12px;
            min-width: 16px;
            text-align: center;
        }
        
        /* 邮件列表 */
        .email-list {
            width: 350px;
            background: #fff;
            border-right: 1px solid #e1e8ed;
            display: flex;
            flex-direction: column;
            min-height: 0; /* 允许内部列表滚动 */
        }
        
        .email-list-header {
            padding: 16px;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .email-list-title {
            font-size: 19px;
            font-weight: 600;
            color: #323130;
        }
        
        .email-search {
            padding: 8px 16px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        .search-input {
            width: 100%;
            box-sizing: border-box;
            padding: 8px 12px;
            border: 1px solid #edebe9;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
        }
        
        .search-input:focus {
            border-color: #0078d4;
        }
        
        .email-items {
            flex: 1;
            overflow-y: auto;
        }
        
        .email-item {
            padding: 12px 16px;
            border-bottom: 1px solid #f3f2f1;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .email-item:hover {
            background: #f3f2f1;
        }
        
        .email-item.active {
            background: #e3f2fd;
            border-left: 3px solid #0078d4;
        }
        
        .email-item.unread {
            background: #fff;
            font-weight: 600;
        }
        
        .email-item.unread .email-subject {
            color: #323130;
        }
        
        .email-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }
        .email-left {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
            flex: 1;
        }
        .email-avatar {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: #f6c2dd;
            color: #6a2c58;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            flex: 0 0 28px;
        }
        .email-sender {
            font-size: 15px;
            color: #323130;
            font-weight: 700;
            line-height: 1.2;
        }
        .email-from {
            font-size: 13px;
            color: #605e5c;
            line-height: 1.2;
        }
        
        .email-subject {
            font-size: 14px;
            color: #605e5c;
            margin: 2px 0;
        }
        
        .email-preview {
            font-size: 13px;
            color: #8a8886;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .email-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 4px;
        }
        
        .email-time-container {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .email-time {
            font-size: 12px;
            color: #8a8886;
        }
        
        .favorite-star {
            cursor: pointer;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .favorite-star svg {
            width: 16px;
            height: 16px;
        }
        
        .favorite-star.detail-favorite {
            width: 20px;
            height: 20px;
            margin-right: 4px;
        }
        
        .favorite-star.detail-favorite svg {
            width: 20px;
            height: 20px;
        }
        
        .favorite-star.favorite-active path {
            fill: gold;
            stroke: #e0a800;
        }
        
        .favorite-item {
            background-color: rgba(255, 0, 0, 0.07);
        }
        .favorite-item .email-subject {
            color: #d9534f;
        }
        
        .favorite-subject {
            color: #d9534f !important;
        }
        
        .email-attachment {
            font-size: 11px;
            color: #0078d4;
        }
        
        /* 邮件内容区域 */
        .email-content {
            flex: 1;
            background: #fff;
            display: flex;
            flex-direction: column;
            min-height: 0; /* 允许内部区域滚动 */
            overflow: hidden; /* 防止内容溢出容器 */
        }
        
        .email-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e1e8ed;
        }
        
        .email-subject-header {
            font-size: 21px;
            font-weight: 600;
            color: #323130;
            margin-bottom: 16px;
        }
        
        .email-sender-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .sender-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #0078d4;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }
        
        .sender-details {
            flex: 1;
        }
        
        .sender-name {
            font-weight: 600;
            color: #323130;
            font-size: 15px;
        }
        
        .sender-email {
            color: #605e5c;
            font-size: 13px;
        }
        
        .email-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            background: none;
            border: 1px solid #edebe9;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            color: #323130;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .pill-btn {
            border-radius: 9999px; /* 药丸型 */
            color: #0078d4; /* 主色蓝 */
            border-color: #cfe7fb;
            font-size: 14px; /* 更大字体 */
            padding: 6px 14px;
        }
        /* 圆形图标按钮 */
        .icon-round {
            width: 32px;
            height: 32px;
            padding: 0;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        /* 刷新按钮圆形样式与旋转动画 */
        .refresh-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            padding: 0;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .refresh-btn img {
            width: 20px;
            height: 20px;
            display: block;
        }
        @keyframes spin1turn { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .refresh-btn.spinning img {
            animation: spin1turn 0.8s linear 1;
        }
        
        .action-btn:hover {
            background: #f3f2f1;
        }
        
        .email-body {
            flex: 1;
            padding: 24px;
            overflow-y: auto; /* 阅读区域可滚动 */
            line-height: 1.6;
            color: #323130;
        }

        /* 确保详情区域采用弹性布局并允许正文滚动 */
        #emailDetail {
            display: flex;
            flex-direction: column;
            min-height: 0;
            height: 100%;
        }
        
        /* 撰写邮件区域 */
        .compose-area {
            display: none;
            flex-direction: column;
            height: 100%;
            overflow-y: auto; /* 撰写区域可滚动 */
        }
        
        .compose-header {
            padding: 16px 24px;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .compose-title {
            font-size: 18px;
            font-weight: 600;
            color: #323130;
        }
        
        .compose-actions {
            display: flex;
            gap: 8px;
        }
        
        .send-btn {
            background: #0078d4;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .send-btn:hover {
            background: #106ebe;
        }
        
        .compose-form {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0 24px;
        }
        
        .compose-field {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f3f2f1;
        }
        
        .compose-label {
            width: 60px;
            font-size: 14px;
            color: #605e5c;
            font-weight: 600;
        }
        
        .compose-input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 14px;
            padding: 4px 8px;
        }
        
        .compose-body {
            flex: 1;
            margin-top: 16px;
        }
        
        .compose-textarea {
            width: 100%;
            height: 100%;
            border: none;
            outline: none;
            resize: none;
            font-family: inherit;
            font-size: 14px;
            line-height: 1.6;
            padding: 16px 0;
        }
        
        /* 响应式设计 */
        @media (max-width: 768px) {
            .email-container {
                margin-top: 46px;
                height: calc(100vh - 46px);
            }
            
            .email-sidebar {
                width: 180px;
            }
            
            .email-list {
                width: 280px;
            }
        }
        
        /* 空状态 */
        .empty-state {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            color: #8a8886;
        }
        
        .empty-icon { margin-bottom: 16px; }

        /* 通用图标样式 */
        .icon { width: 16px; height: 16px; display: inline-block; vertical-align: middle; }
        .icon-lg { width: 24px; height: 24px; }
        .icon-primary { fill: currentColor; }
        .folder-item .left { display: inline-flex; align-items: center; gap: 8px; }
        .empty-subtitle { font-size: 14px; color: #a19f9d; }
        
        /* 草稿图标特殊样式 */
        .drafts-icon { 
            transform: scale(0.9);
            margin-right: 1px;
        }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="main-nav-container">
            <a href="index.html" class="logo"><img id="site-logo" src="images/logo.png" alt="翰林桥 Logo"></a>
            <nav class="main-nav">
                <ul>
                    <li class="nav-highlight"></li>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="tutors.html">助学人</a></li>
                    <li><a href="trend.html">趋势</a></li>
                    <li><a href="lingning.html">灵凝</a></li>
                    <li><a href="customize.html">定制</a></li>
                    <li><a href="help.html">帮助</a></li>
                    <li><a href="cooperation.html">新闻</a></li>
                    <li><a href="socialmedia.html">社媒</a></li>
                    <li><a href="email.html" class="active">邮件</a></li>
                </ul>
            </nav>
            <div class="user-avatar" id="userAvatar">
                <img src="images/login-default.png" alt="登录" id="avatarImg">
            </div>
        </div>
    </header>

    <div class="login-modal" id="loginModal">
        <div class="login-modal-content">
            <span class="login-close-btn" id="loginCloseBtn">&times;</span>
            <h2>登录</h2>
            <form id="loginForm">
                <input type="text" id="loginUsername" placeholder="用户名/账号" autocomplete="username" required>
                <input type="password" id="loginPassword" placeholder="密码" autocomplete="current-password" required>
                <button type="submit">登录</button>
            </form>
            <div class="login-error" id="loginError"></div>
        </div>
    </div>

    <div class="email-container" style="display: flex; width: 100%; height: calc(100vh - 54px);">
        <!-- 左侧边栏 -->
        <div class="email-sidebar" style="width: 200px; flex-shrink: 0;">
            <button class="compose-btn" id="composeBtn">
                <svg class="icon icon-primary" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 5a2 2 0 0 1 2-2h7a1 1 0 1 1 0 2H6v14h12v-7a1 1 0 1 1 2 0v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5z"/><path d="M20.7 3.3a1 1 0 0 1 0 1.4l-8.9 8.9-3.5.9.9-3.5 8.9-8.9a1 1 0 0 1 1.4 0z"/></svg>
                撰写
            </button>
            <ul class="folder-list">
                <li class="folder-item active" data-folder="inbox">
                    <span class="left">
                        <svg class="icon icon-primary" viewBox="0 0 24 24" aria-hidden="true"><path d="M3 4h18a1 1 0 0 1 1 1v9a3 3 0 0 1-3 3h-4l-2 3-2-3H5a3 3 0 0 1-3-3V5a1 1 0 0 1 1-1zm1 2v8a1 1 0 0 0 1 1h5l2 3 2-3h5a1 1 0 0 0 1-1V6H4z"/></svg>
                        收件箱
                    </span>
                    <span class="folder-count" id="inboxCount">0</span>
                </li>
                <li class="folder-item" data-folder="sent">
                    <span class="left">
                        <svg class="icon icon-primary" viewBox="0 0 24 24" aria-hidden="true"><path d="M2 12l20-9-9 20-2-8-7-3z"/></svg>
                        已发送邮件
                    </span>
                    <span class="folder-count" id="sentCount">0</span>
                </li>
                <li class="folder-item" data-folder="drafts">
                    <span class="left">
                        <svg class="icon icon-primary drafts-icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M4 3h10l6 6v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm10 1.5V9h4.5"/><path d="M7 14h10M7 18h10M7 10h6"/></svg>
                        草稿
                    </span>
                    <span class="folder-count" id="draftsCount">0</span>
                </li>
                <li class="folder-item" data-folder="deleted">
                    <span class="left">
                        <svg class="icon icon-primary" viewBox="0 0 24 24" aria-hidden="true">
                          <path d="M6 7h12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                          <path d="M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                          <rect x="6" y="7" width="12" height="14" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2"/>
                          <path d="M10 11v6M14 11v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        已删除邮件
                    </span>
                    <span class="folder-count" id="deletedCount">0</span>
                </li>
            </ul>
        </div>

        <!-- 邮件列表 -->
        <div class="email-list">
            <div class="email-list-header">
                <div class="email-list-title">收件箱</div>
                <div style="display: flex; gap: 8px;">
                    <button class="action-btn refresh-btn" id="refreshBtn" title="刷新">
                        <img src="data:image/png;base64,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" alt="刷新">
                    </button>
                </div>
            </div>
            <div class="email-search">
                <input type="text" class="search-input" placeholder="搜索邮件..." id="searchInput">
            </div>
            <div class="email-items" id="emailItems">
                <!-- 邮件列表将由JavaScript动态加载 -->
            </div>
        </div>

        <!-- 邮件内容区域 -->
        <div class="email-content" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
            <!-- 阅读邮件 -->
            <div id="readingArea" class="empty-state">
                <div class="empty-icon">
                    <svg class="icon-lg icon-primary" viewBox="0 0 64 64" aria-hidden="true"><path d="M8 16h48a4 4 0 0 1 4 4v28a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4V20a4 4 0 0 1 4-4zm0 6v26h48V22l-24 14L8 22z"/></svg>
                </div>
                <div class="empty-message">选择一封邮件来阅读</div>
                <div class="empty-subtitle">您的邮箱地址: <span id="userEmailAddress">未登录</span></div>
            </div>

            <!-- 撰写邮件 -->
            <div id="composeArea" class="compose-area">
                <div class="compose-header">
                    <div class="compose-title">撰写邮件</div>
                    <div class="compose-actions">
                        <button class="send-btn" id="sendBtn">发送</button>
                        <button class="action-btn" id="saveDraftBtn">保存草稿</button>
                        <button class="action-btn" id="cancelComposeBtn">✕</button>
                    </div>
                </div>
                <form class="compose-form" id="composeForm">
                    <div class="compose-field">
                        <label class="compose-label">收件人:</label>
                        <input type="text" class="compose-input" id="toInput" placeholder="输入收件人邮箱地址" required>
                    </div>
                    <div class="compose-field">
                        <label class="compose-label">抄送:</label>
                        <input type="text" class="compose-input" id="ccInput" placeholder="抄送 (可选)">
                    </div>
                    <div class="compose-field">
                        <label class="compose-label">主题:</label>
                        <input type="text" class="compose-input" id="subjectInput" placeholder="邮件主题" required>
                    </div>
                    <div class="compose-body">
                        <textarea class="compose-textarea" id="bodyInput" placeholder="输入邮件内容..."></textarea>
                    </div>
                </form>
            </div>

            <!-- 邮件详情 -->
            <div id="emailDetail" style="display: none; flex: 1; width: 100%; height: 100%; overflow: hidden; flex-direction: column;">
                <div class="email-header">
                    <div class="email-subject-header" id="detailSubject"></div>
                    <div class="email-sender-info">
                        <div class="sender-avatar" id="detailAvatar"></div>
                        <div class="sender-details">
                            <div class="sender-name" id="detailSenderName"></div>
                            <div class="sender-email" id="detailSenderEmail"></div>
                            <div class="email-time" id="detailTime"></div>
                        </div>
                        <div class="email-actions">
                            <button class="action-btn pill-btn" id="replyBtn">回复</button>
                            <button class="action-btn pill-btn" id="forwardBtn">转发</button>
                            <button class="action-btn icon-round" id="deleteBtn" title="删除">
                              <svg class="icon icon-primary" viewBox="0 0 24 24" aria-hidden="true">
                                <path d="M6 7h12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M9 7V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <rect x="6" y="7" width="12" height="14" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path d="M10 11v6M14 11v6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                              </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="email-body" id="detailBody" style="flex: 1; padding: 24px; overflow-y: auto; display: block;">
                    <!-- 邮件内容 -->
                </div>
            </div>
        </div>
    </div>

    <script src="users.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="script.js?v=4"></script>
    <script src="email.js"></script>
    <script>
      // 仅在本页确保“邮件”是唯一active的导航项
      (function() {
        try {
          const links = document.querySelectorAll('.main-nav ul li a');
          links.forEach(a => a.classList.remove('active'));
          const emailLink = Array.from(links).find(a => (a.getAttribute('href') || '').endsWith('email.html'));
          if (emailLink) emailLink.classList.add('active');
          // 触发一次高亮定位
          const highlight = document.querySelector('.nav-highlight');
          if (highlight && emailLink && emailLink.parentElement) {
            highlight.style.opacity = '1';
            highlight.style.left = emailLink.parentElement.offsetLeft + 'px';
            highlight.style.top = emailLink.parentElement.offsetTop + 'px';
            highlight.style.width = emailLink.parentElement.offsetWidth + 'px';
            highlight.style.height = emailLink.parentElement.offsetHeight + 'px';
          }
        } catch {}
      })();
    </script>
    <script src="user-tracking.js"></script>
</body>
</html>
